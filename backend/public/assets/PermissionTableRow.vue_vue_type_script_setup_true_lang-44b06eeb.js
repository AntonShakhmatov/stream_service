import{o as r,c as a,a as c,z as M,j as I,A as O,r as _,b as h,w as C,n as b,p as z,x as m,ao as t,m as x,R as u,d as j,t as R,a5 as P}from"./multiselect-82d1182f.js";import{e as N,b as T}from"./index-5e60d8d5.js";import{r as E}from"./ChevronDownIcon-f71325c4.js";function Z(V,w){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})])}function D(V,w){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})])}const F={key:0,class:"contents"},U=M({__name:"PermissionTableRow",props:{modelValue:{},permission:{},permissionName:{},level:{default:0}},emits:["update:modelValue"],setup(V,{emit:w}){const l=V,g=w,p=I({get:()=>l.modelValue,set:e=>{g("update:modelValue",e)}}),f=O(!0),v=I(()=>typeof l.permission=="object"),$=e=>e.permissions.includes(l.permission),A=e=>{const n=l.modelValue.findIndex(o=>o.id===e.id);if($(e)){const o=l.modelValue[n].permissions.filter(function(s){return s!==l.permission});l.modelValue[n].permissions=o}else l.modelValue[n].permissions.push(l.permission);g("update:modelValue",l.modelValue)},d=e=>{const n=l.modelValue.findIndex(i=>i.id===e.id),o=k(l.permission),s=l.modelValue[n].permissions;return o.every(i=>s.includes(i))?!0:o.every(i=>!s.includes(i))?!1:null},B=(e,n)=>{const o=l.modelValue.findIndex(i=>i.id===e.id),s=k(l.permission);if(n)s.forEach(i=>{l.modelValue[o].permissions.push(i)});else{const i=l.modelValue[o].permissions.filter(function(y){return!s.includes(y)});l.modelValue[o].permissions=i}g("update:modelValue",l.modelValue)},k=e=>{let n=[];for(var o in e)e.hasOwnProperty(o)&&(typeof e[o]=="object"?n=n.concat(k(e[o])):n.push(e[o]));return n};return(e,n)=>{const o=_("PermissionTableRow",!0);return r(),a(u,null,[c("tr",{class:b(["border-b",{"bg-indigo-50":e.level===0,"bg-slate-50":e.level===1,"bg-white":e.level>1}])},[h(t(N),{class:"relative py-0 pr-0"},{default:C(()=>[c("div",{class:b(["flex",{"pl-8":e.level===1,"pl-16":e.level===2,"pl-24":e.level===3,"pl-32":e.level===4}])},[v.value?(r(),a("button",{key:0,type:"button",onClick:n[0]||(n[0]=z(s=>f.value=!f.value,["prevent"])),class:"flex"},[f.value?(r(),m(t(Z),{key:0,class:"h-5 w-5"})):(r(),m(t(E),{key:1,class:"h-5 w-5"})),h(t(D),{class:"ml-3 mr-2 h-5 w-5"})])):x("",!0),c("div",{class:b(["text-sm text-slate-900",{"font-medium":e.level===0}])},[v.value?(r(),a(u,{key:0},[j(R(e.$t(e.permissionName)),1)],64)):(r(),a(u,{key:1},[j(R(e.$t(e.permission)),1)],64))],2)],2)]),_:1}),v.value?(r(!0),a(u,{key:0},P(p.value,s=>(r(),m(t(N),{class:"border-l"},{default:C(()=>[h(t(T),{class:"justify-center",modelValue:d(s)===null||d(s),checked:d(s)===null||d(s),indeterminate:d(s)===null,onChange:i=>i.target.checked?B(s,!0):B(s,!1)},null,8,["modelValue","checked","indeterminate","onChange"])]),_:2},1024))),256)):(r(!0),a(u,{key:1},P(p.value,s=>(r(),m(t(N),{class:"border-l"},{default:C(()=>[h(t(T),{class:"justify-center",modelValue:$(s),onChange:i=>A(s)},null,8,["modelValue","onChange"])]),_:2},1024))),256))],2),v.value&&f.value?(r(),a("div",F,[(r(!0),a(u,null,P(Object.entries(e.permission),([s,i])=>(r(),m(o,{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=y=>p.value=y),permission:i,permissionName:e.permissionName+"."+s,level:e.level+1,key:s},null,8,["modelValue","permission","permissionName","level"]))),128))])):x("",!0)],64)}}});export{U as _};
