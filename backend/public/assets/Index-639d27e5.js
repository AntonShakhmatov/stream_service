import{o as s,c,a as o,z as X,x as U,w as d,e as L,d as _,t as l,b as u,ao as t,q as P,n as O,A as Z,f as ne,j as G,bV as ue,m as M,k as T,R as S,a5 as J,p as K,ap as oe,ag as me}from"./multiselect-82d1182f.js";import{T as ge,a as V,i as ye,g as _e,f as we,h as E,_ as pe,r as be,o as ke,t as fe,j as $e,Q as B,k as xe,l as Ce,C as Fe,m as Me,E as Ve,c as Ie,d as le,e as re,F as ie}from"./index-5e60d8d5.js";import{_ as Ae,a as De}from"./PageContent.vue_vue_type_script_setup_true_lang-0e610396.js";import{_ as ae}from"./Tag.vue_vue_type_script_setup_true_lang-85406545.js";import{_ as ce}from"./Modal.vue_vue_type_script_setup_true_lang-d1f72c5a.js";import{_ as de}from"./Tab.vue_vue_type_script_setup_true_lang-19ab653a.js";import{_ as Ue}from"./FiltersDropdown.vue_vue_type_script_setup_true_lang-6f413881.js";import{u as je}from"./useListingFilters-5243ac0c.js";import{_ as ze}from"./CustomPropertyInput.vue_vue_type_script_setup_true_lang-446ce3a5.js";import{r as Oe}from"./TrashIcon-be48d9bb.js";import"./ChevronDownIcon-f71325c4.js";import"./_baseIteratee-5808ab78.js";import"./ArrowDownTrayIcon-2acb5861.js";import"./PencilSquareIcon-d2491426.js";function he(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3"})])}function Be(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})])}function Ne(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3"})])}function He(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"})])}function Se(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})])}function Le(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"})])}function Te(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})])}function Ze(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function Re(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Ye(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function Ee(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function Pe(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Xe(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"fill-rule":"evenodd",d:"M2 4.75A.75.75 0 0 1 2.75 4h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75ZM2 10a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 10Zm0 5.25a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function qe(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"})])}function Qe(r,n){return s(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{"fill-rule":"evenodd",d:"M4.25 2A2.25 2.25 0 0 0 2 4.25v2.5A2.25 2.25 0 0 0 4.25 9h2.5A2.25 2.25 0 0 0 9 6.75v-2.5A2.25 2.25 0 0 0 6.75 2h-2.5Zm0 9A2.25 2.25 0 0 0 2 13.25v2.5A2.25 2.25 0 0 0 4.25 18h2.5A2.25 2.25 0 0 0 9 15.75v-2.5A2.25 2.25 0 0 0 6.75 11h-2.5Zm9-9A2.25 2.25 0 0 0 11 4.25v2.5A2.25 2.25 0 0 0 13.25 9h2.5A2.25 2.25 0 0 0 18 6.75v-2.5A2.25 2.25 0 0 0 15.75 2h-2.5Zm0 9A2.25 2.25 0 0 0 11 13.25v2.5A2.25 2.25 0 0 0 13.25 18h2.5A2.25 2.25 0 0 0 18 15.75v-2.5A2.25 2.25 0 0 0 15.75 11h-2.5Z","clip-rule":"evenodd"})])}let se;const Ge=new Uint8Array(16);function Je(){if(!se&&(se=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!se))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return se(Ge)}const F=[];for(let r=0;r<256;++r)F.push((r+256).toString(16).slice(1));function Ke(r,n=0){return F[r[n+0]]+F[r[n+1]]+F[r[n+2]]+F[r[n+3]]+"-"+F[r[n+4]]+F[r[n+5]]+"-"+F[r[n+6]]+F[r[n+7]]+"-"+F[r[n+8]]+F[r[n+9]]+"-"+F[r[n+10]]+F[r[n+11]]+F[r[n+12]]+F[r[n+13]]+F[r[n+14]]+F[r[n+15]]}const We=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ve={randomUUID:We};function et(r,n,y){if(ve.randomUUID&&!n&&!r)return ve.randomUUID();r=r||{};const f=r.random||(r.rng||Je)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,n){y=y||0;for(let i=0;i<16;++i)n[y+i]=f[i];return n}return Ke(f)}const tt=X({__name:"ImageUploadModal",emits:["imageUploaded"],setup(r,{emit:n}){const y=n,f=ge({default:[]}),i=()=>{P.post("/admin/unassigned-media-upload",f.data()).then(b=>{y("imageUploaded",b.data.media),f.default=[]}).catch(b=>console.error(b))};return(b,k)=>(s(),U(t(ce),{class:"flex items-center justify-center"},{trigger:d(({setIsOpen:C})=>[L(b.$slots,"button",{setIsOpen:C})]),title:d(()=>[_(l(b.$t("Upload media")),1)]),content:d(()=>[u(t(Dt),{modelValue:t(f).default,"onUpdate:modelValue":k[0]||(k[0]=C=>t(f).default=C),centered:"",maxNumberOfFiles:1},{icon:d(()=>[u(t(Ee),{class:"mb-2 h-10 w-10 stroke-1 text-gray-500"})]),_:1},8,["modelValue"])]),buttons:d(({setIsOpen:C})=>[u(t(V),{onClick:()=>{C(!1),i()}},{default:d(()=>[_(l(b.$t("Submit")),1)]),_:2},1032,["onClick"])]),_:3}))}}),ot={class:"pointer-events-auto w-screen max-w-xs pl-10 md:max-w-sm xl:relative xl:pl-0 2xl:max-w-md"},at=X({__name:"Aside",props:{noPadding:{type:Boolean,default:!1}},setup(r){return(n,y)=>(s(),c("aside",ot,[o("div",{class:O(["flex h-full flex-col overflow-y-auto border-l border-gray-200 bg-white",{"px-4 py-5 sm:p-6":!n.noPadding}])},[L(n.$slots,"default")],2)]))}}),st=["src","alt"],nt={key:1,class:"relative flex aspect-square h-full items-center justify-center"},lt={class:"absolute translate-y-1 font-mono text-sm font-semibold uppercase text-gray-500"},W=X({__name:"FileThumbnail",props:{file:{}},setup(r){const n=r,y=Z(n.file.preview_url||n.file.original_url),f=new FileReader;return f.onloadend=i=>{y.value=f.result},ne(()=>n.file.file,()=>{n.file.file&&f.readAsDataURL(n.file.file)},{immediate:!0}),(i,b)=>{var k;return t(ye)(i.file.file_name)?(s(),c("img",{key:0,src:y.value,alt:((k=i.file.custom_properties)==null?void 0:k.name)||i.file.file_name,class:"aspect-square w-full rounded object-cover"},null,8,st)):(s(),c("div",nt,[u(t(Ye),{class:"w-full max-w-[5rem] stroke-1 text-gray-500"}),o("span",lt,l(t(_e)(i.file.file_name)),1)]))}}}),rt={class:"w-full"},it=["for"],dt={class:"mt-1 rounded-md shadow-sm sm:col-span-2 sm:mt-0"},ut=["for"],ct=["id","name","accept","onInput"],mt=["onClick"],pt={key:1,class:"divide-y divide-gray-100 border-gray-300"},ft={class:"group relative"},ht={class:"absolute inset-0 flex flex-col items-center justify-center gap-3 rounded bg-gray-900/60 p-2 opacity-0 transition-opacity group-hover:opacity-100"},vt=["for"],_t=["id","name","accept","onInput"],gt={class:"text-sm text-gray-500"},yt={class:"uppercase"},wt={class:"col-span-2 space-y-3"},bt=["onClick"],kt=["for"],$t=["id","name","multiple","accept"],xt={class:"space-y-1"},Ct={class:"flex text-sm text-gray-600"},Ft={key:0},Mt={key:1},Vt={class:"text-xs text-gray-500"},It={key:0},At={key:1},Dt=X({__name:"Dropzone",props:{name:{},label:{},modelValue:{default:[]},accept:{},maxNumberOfFiles:{type:[Number,Boolean]},onlyThumbs:{type:Boolean},maxFileSize:{default:2*1024*1024},centered:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,{emit:n}){const y=r,f=G(()=>!y.maxNumberOfFiles||y.maxNumberOfFiles>1),i=we(),b=n,k=Z(y.modelValue),C=G(()=>{var a;return k.value?(a=k.value)==null?void 0:a.filter(m=>!m.action||m.action!=="delete").sort((m,$)=>m.order_column-$.order_column):[]});ne(()=>[k.value],()=>{var a;b("update:modelValue",(a=k.value)==null?void 0:a.map(m=>ke(m,["file"])))},{deep:!0}),ne(()=>y.modelValue,a=>{a==null||a.forEach(m=>{var e;const $=(e=k.value)==null?void 0:e.find(p=>p.path===m.file_name);k.value&&$&&(k.value.find(p=>p.path===m.file_name).action=null)})},{deep:!0});const A=a=>{const m=Array.from(a.target.files);q(m)},v=a=>{a&&(a.action="delete")},g=G(()=>{var a;return y.accept?(a=y.accept)==null?void 0:a.split(",").map(m=>m.includes("/")&&m.split("/")[1]!=="*"?`.${m.split("/")[1]}`:m).join(", "):""}),x=Z(!1),R=()=>{x.value=!0},Y=()=>{x.value=!1},j=a=>{const m=Array.from(a.dataTransfer.files);q(m),x.value=!1},q=a=>{y.maxNumberOfFiles&&(a=a.slice(0,y.maxNumberOfFiles-C.value.length)),a.forEach(m=>{if(m.size>y.maxFileSize){i.error(fe("mycustomadmin","File size is too big!"));return}const $=new FormData;$.append("file",m),P.post("/admin/upload",$,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{k.value.push({id:null,uuid:et(),collection_name:"images",action:"add",path:e.data.path,size:m.size,file_name:m.name,custom_properties:{name:m.name,alt:""},file:m})}).catch(e=>{i.error(e.message)})})},Q=(a,m)=>{const $=Array.from(m.target.files)[0];if($){if($.size>y.maxFileSize){i.error(fe("mycustomadmin","File size is too big!"));return}const e=new FormData;e.append("file",$),P.post("/admin/upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then(p=>{var h,I;const N=(h=k.value)==null?void 0:h.findIndex(w=>w.uuid===a),H=(I=k.value)==null?void 0:I.find(w=>w.uuid===a);typeof N<"u"&&N!==-1&&H&&(v(H),k.value.splice(N,0,{...H,id:null,action:"add",path:p.data.path,file:$,file_name:$.name,size:$.size}))}).catch(p=>{i.error(p.message)})}},ee=(a,m,$)=>{oe.set(a.custom_properties,m,$)},te=(a,m)=>(oe.get(a==null?void 0:a.custom_properties,m)||oe.set(a.custom_properties,m,""),oe.get(a==null?void 0:a.custom_properties,m));return(a,m)=>{const $=ue("auto-animate");return s(),c("div",rt,[a.label?(s(),c("label",{key:0,for:a.name,class:"mb-1 block text-sm font-medium text-gray-700"},l(a.label),9,it)):M("",!0),T((s(),c("div",dt,[C.value.length?(s(),c("div",{key:0,class:O(["rounded-md border border-gray-300",{"rounded-b-none border-b-0":!a.maxNumberOfFiles||C.value.length<a.maxNumberOfFiles}])},[a.onlyThumbs?T((s(),c("div",{key:0,class:O(["flex flex-wrap items-center gap-4 p-5",{"justify-center":a.centered}])},[(s(!0),c(S,null,J(C.value,e=>(s(),c("div",{key:e.uuid,class:"group relative"},[L(a.$slots,"thumb",{file:e},()=>[u(W,{file:e},null,8,["file"])]),o("label",{for:e.uuid,type:"button",class:"absolute inset-0 flex cursor-pointer items-center justify-center rounded bg-gray-900/60 opacity-0 transition-opacity group-hover:opacity-100"},[u(t(he),{class:"h-8 w-8 text-white"}),o("input",{id:e.uuid,class:"sr-only absolute",type:"file",name:e.uuid,multiple:"false",accept:a.accept,onInput:p=>Q(e.uuid,p)},null,40,ct)],8,ut),o("button",{type:"button",class:"text-danger-500 hover:text-danger-700 absolute -right-2 -top-2 rounded-full bg-white",onClick:p=>v(e)},[u(t(Pe),{class:"h-6 w-6"})],8,mt)]))),128))],2)),[[$]]):T((s(),c("div",pt,[(s(!0),c(S,null,J(C.value,e=>(s(),c("div",{key:e.uuid,class:"relative grid grid-cols-[8rem_repeat(3,_1fr)] items-center gap-5 p-5"},[o("div",ft,[L(a.$slots,"thumb",{file:e},()=>[u(W,{file:e},null,8,["file"])]),o("div",ht,[o("label",{for:e.uuid,type:"button"},[u(t(V),{"left-icon":t(he),size:"sm",color:"gray",variant:"outline",as:"span"},{default:d(()=>[_(l(a.$t("Replace")),1)]),_:1},8,["left-icon"]),o("input",{id:e.uuid,class:"sr-only absolute",type:"file",name:e.uuid,multiple:"false",accept:a.accept,onInput:p=>Q(e.uuid,p)},null,40,_t)],8,vt),e.id?M("",!0):(s(),U(t(ce),{key:0,size:"lg"},{trigger:d(({setIsOpen:p})=>[u(t(V),{size:"sm",color:"gray",variant:"outline","left-icon":t(He),onClick:()=>p(!0)},{default:d(()=>[_(l(a.$t("Crop")),1)]),_:2},1032,["left-icon","onClick"])]),content:d(({setIsOpen:p})=>[u(t(zt),{src:e.base64,onOnCrop:(N,H)=>{e.file=N,e.path=H,p(!1)}},null,8,["src","onOnCrop"])]),_:2},1024))])]),o("div",gt,[o("p",yt,l(t(_e)(e.file_name)),1),o("p",null,l(t(E)(e.size)),1)]),o("div",wt,[L(a.$slots,"inputs",{file:e,setCustomProperty:ee,getCustomProperty:te},()=>[u(t(pe),{modelValue:e.custom_properties.name,"onUpdate:modelValue":p=>e.custom_properties.name=p,size:"sm",label:"File name",name:`${e.uuid??e.id}_name`},null,8,["modelValue","onUpdate:modelValue","name"]),u(t(pe),{modelValue:e.custom_properties.alt,"onUpdate:modelValue":p=>e.custom_properties.alt=p,size:"sm",label:"Alt text",name:`${e.uuid??e.id}_alt`},null,8,["modelValue","onUpdate:modelValue","name"])])]),o("button",{type:"button",class:"absolute right-3 top-2 rounded-full text-gray-500 hover:text-gray-700",onClick:p=>v(e)},[u(t(be),{class:"h-6 w-6"})],8,bt)]))),128))])),[[$]])],2)):M("",!0),!a.maxNumberOfFiles||C.value.length<a.maxNumberOfFiles?(s(),c("label",{key:1,for:a.name,class:O(["relative block shrink-0 cursor-pointer rounded-b-md border border-dashed p-5",{"rounded-t-md":!C.value.length,"border-primary-400":x.value,"hover:border-primary-400 border-gray-300":!x.value}]),onDragover:K(R,["prevent"]),onDragleave:K(Y,["prevent"]),onDrop:K(j,["prevent"])},[o("input",{id:a.name,class:"sr-only absolute",type:"file",name:a.name,multiple:f.value,accept:a.accept,onInput:A},null,40,$t),o("div",{class:O(["flex items-center gap-2",{"flex-col text-center":a.centered}])},[L(a.$slots,"placeholder",{maxNumberOfFiles:a.maxNumberOfFiles,formatedAccept:g.value,maxFileSize:a.maxFileSize,formatBytes:t(E)},()=>[L(a.$slots,"icon",{},()=>[u(t(Re),{class:"h-10 w-10 stroke-1 text-gray-500"})]),o("div",xt,[o("div",Ct,[m[0]||(m[0]=o("span",null,"Select or drag and drop",-1)),a.maxNumberOfFiles&&a.maxNumberOfFiles>1?(s(),c("span",Ft," > maximum of "+l(a.maxNumberOfFiles)+" files",1)):(s(),c("span",Mt," file"))]),o("p",Vt,[g.value?(s(),c("span",It,l(g.value),1)):M("",!0),a.maxFileSize?(s(),c("span",At," up to "+l(t(E)(a.maxFileSize)),1)):M("",!0)])])])],2)],42,kt)):M("",!0)])),[[$]])])}}}),Ut={class:"mb-4 flex items-center justify-between gap-2"},jt={class:"flex items-center gap-2"},zt=X({__name:"ImageEditor",props:{src:{}},emits:["onCrop"],setup(r,{emit:n}){const y=n,f=Z(null),i=()=>{var g,x;let v=(g=f.value)==null?void 0:g.getData().scaleX;v=v?-v:-1,(x=f.value)==null||x.scaleX(v)},b=()=>{var g,x;let v=(g=f.value)==null?void 0:g.getData().scaleY;v=v?-v:-1,(x=f.value)==null||x.scaleY(v)},k=v=>{var g;(g=f.value)==null||g.rotate(v)},C=()=>{var v,g,x;(x=f.value)==null||x.setCropBoxData({left:0,top:0,width:(v=f.value)==null?void 0:v.getImageData().width,height:(g=f.value)==null?void 0:g.getImageData().height})},A=()=>{var g;const v=(g=f.value)==null?void 0:g.getCroppedCanvas();v.toDataURL(),v.toBlob(x=>{const R=new File([x],"cropped.jpg",{type:"image/jpeg"}),Y=new FormData;Y.append("file",R),P.post("/admin/upload",Y,{headers:{"Content-Type":"multipart/form-data"}}).then(j=>{y("onCrop",R,j.data.path)}).catch(j=>{console.error(j==null?void 0:j.message)})})};return(v,g)=>(s(),c("div",null,[o("div",Ut,[o("div",jt,[u(t(V),{variant:"outline",leftIcon:t(Be),onClick:g[0]||(g[0]=x=>k(-90))},{default:d(()=>[_(l(v.$t("Rotate left")),1)]),_:1},8,["leftIcon"]),u(t(V),{variant:"outline",leftIcon:t(Ne),onClick:g[1]||(g[1]=x=>k(90))},{default:d(()=>[_(l(v.$t("Rotate right")),1)]),_:1},8,["leftIcon"]),u(t(V),{variant:"outline",leftIcon:t(Le),onClick:i},{default:d(()=>[_(l(v.$t("Flip X")),1)]),_:1},8,["leftIcon"]),u(t(V),{variant:"outline",leftIcon:t(Te),onClick:b},{default:d(()=>[_(l(v.$t("Flip Y")),1)]),_:1},8,["leftIcon"]),u(t(V),{variant:"outline",leftIcon:t(Se),onClick:C},{default:d(()=>[_(l(v.$t("Select whole image")),1)]),_:1},8,["leftIcon"])]),u(t(V),{onClick:A},{default:d(()=>[_(l(v.$t("Crop image")),1)]),_:1})]),u(t($e),{ref_key:"cropper",ref:f,src:v.src,movable:!1,zoomable:!1,viewMode:"1"},null,8,["src"])]))}}),Ot={class:"flex items-center gap-4 divide-x"},Bt={class:"flex items-center gap-4 pl-4"},Nt={class:"relative flex gap-1 rounded-md bg-gray-100 p-0.5"},Ht=["onClick"],St={class:"sr-only"},Lt={class:"pointer-events-none mt-2 block truncate text-sm font-medium text-gray-900"},Tt={class:"pointer-events-none block text-sm font-medium text-gray-500"},Zt={key:1,class:"overflow-x-auto"},Rt={class:"space-y-6 pb-16"},Yt={key:0},Et={class:"mb-4 block w-full overflow-hidden rounded-lg"},Pt={class:"flex items-start justify-between"},Xt={class:"overflow-auto"},qt={class:"truncate text-lg font-medium text-gray-900"},Qt={class:"sr-only"},Gt={class:"text-sm font-medium text-gray-500"},Jt={key:1},Kt={class:"font-medium text-gray-900"},Wt={class:"mt-2 divide-y divide-gray-200 border-t border-b border-gray-200"},eo={class:"py-3 text-sm font-medium"},to={class:"text-gray-500"},oo={class:"whitespace-nowrap text-gray-900"},ao={class:"flex justify-between py-3 text-sm font-medium"},so={class:"text-gray-500"},no={class:"whitespace-nowrap text-gray-900"},lo={class:"flex justify-between py-3 text-sm font-medium"},ro={class:"text-gray-500"},io={class:"whitespace-nowrap text-gray-900"},uo={class:"flex justify-between py-3 text-sm font-medium"},co={class:"text-gray-500"},mo={class:"whitespace-nowrap text-gray-900"},po={class:"flex justify-between py-3 text-sm font-medium"},fo={class:"text-gray-500"},ho={class:"whitespace-nowrap text-gray-900"},vo={class:"flex justify-between py-3 text-sm font-medium"},_o={class:"text-gray-500"},go={class:"whitespace-nowrap text-gray-900"},yo={key:2,class:"flex gap-4"},wo={class:"max-w-sm"},bo={class:"truncate text-gray-500"},Bo=X({__name:"Index",props:{data:{},filterOptions:{}},setup(r){var j,q,Q,ee,te,a,m,$;const n=e=>{const p=B().url.split("?")[0];return`${e}?`.indexOf(`${p}?`)!==-1},y=r,f=Z(!0),i=Z(null),b=Z("grid");ne(()=>i.value,()=>{f.value=!1,setTimeout(()=>{f.value=!0},200)});const k=G(()=>y.data),C=G(()=>n(route("media.images"))?route("media.images"):n(route("media.files"))?route("media.files"):route("media.index")),{filtersForm:A,resetFilters:v,activeFiltersCount:g}=je(C.value,{model_type:(j=B().props.filter)!=null&&j.model_type?[(q=B().props.filter)==null?void 0:q.model_type]:[],collection_name:(Q=B().props.filter)!=null&&Q.collection_name?[(ee=B().props.filter)==null?void 0:ee.collection_name]:[],mime_type:(te=B().props.filter)!=null&&te.mime_type?[(a=B().props.filter)==null?void 0:a.mime_type]:[],disk:(m=B().props.filter)!=null&&m.disk?[($=B().props.filter)==null?void 0:$.disk]:[]}),x=e=>{e&&ie.reload({only:["data"]})},R=e=>{P.delete("/admin/unassigned-media-destroy/"+e).then(p=>{i.value=null,ie.reload({only:["data"]})}).catch(p=>console.error(p))},Y=()=>{P.post("/admin/media/update/"+i.value.id,{custom_properties:i.value.custom_properties}).then(e=>{ie.reload({only:["data"]})}).catch(e=>console.error(e))};return(e,p)=>{const N=ue("can"),H=ue("auto-animate");return s(),c(S,null,[u(t(Ae),{title:e.$t("Media")},{default:d(()=>[u(t(tt),{onImageUploaded:x},{button:d(({setIsOpen:h})=>[T((s(),U(t(V),{"left-icon":t(qe),as:"button",onClick:()=>h(!0)},{default:d(()=>[_(l(e.$t("Upload media")),1)]),_:2},1032,["left-icon","onClick"])),[[N,"media.upload"]])]),_:1})]),_:1},8,["title"]),u(t(De),null,{aside:d(()=>[i.value?(s(),U(t(at),{key:0,class:"hidden xl:block"},{default:d(()=>{var h,I;return[T((s(),c("div",Rt,[f.value?(s(),c("div",Yt,[o("div",Et,[u(t(W),{file:i.value},null,8,["file"])]),o("div",Pt,[o("div",Xt,[o("h2",qt,[o("span",Qt,l(e.$t("Details for")),1),_(" "+l(((h=i.value.custom_properties)==null?void 0:h.name)||i.value.file_name),1)]),o("p",Gt,l(t(E)(i.value.size)),1)])])])):M("",!0),f.value?(s(),c("div",Jt,[o("h3",Kt,l(e.$t("Information")),1),o("dl",Wt,[o("div",eo,[o("dt",to,l(e.$t("Model type")),1),o("dd",oo,l(i.value.model_type),1)]),o("div",ao,[o("dt",so,l(e.$t("Model ID")),1),o("dd",no,l(i.value.model_id),1)]),o("div",lo,[o("dt",ro,l(e.$t("Collection")),1),o("dd",io,l(i.value.collection_name),1)]),(s(!0),c(S,null,J(i.value.custom_properties,(w,D)=>(s(),c(S,null,[D!=="name"?(s(),U(ze,{key:D,modelValue:i.value.custom_properties[D],"onUpdate:modelValue":z=>i.value.custom_properties[D]=z,propertyName:D,onSaved:Y},null,8,["modelValue","onUpdate:modelValue","propertyName"])):M("",!0)],64))),256)),o("div",uo,[o("dt",co,l(e.$t("Mime Type")),1),o("dd",mo,l(i.value.mime_type),1)]),o("div",po,[o("dt",fo,l(e.$t("Uploaded at")),1),o("dd",ho,l(t(me)(i.value.created_at).format("DD.MM.YYYY HH:mm")),1)]),o("div",vo,[o("dt",_o,l(e.$t("Last modified")),1),o("dd",go,l(t(me)(i.value.updated_at).format("DD.MM.YYYY HH:mm")),1)])])])):M("",!0),f.value?(s(),c("div",yo,[u(t(V),{as:"a",leftIcon:t(Ze),href:i.value.original_url,download:((I=i.value.custom_properties)==null?void 0:I.name)||i.value.file_name},{default:d(()=>[_(l(e.$t("Download")),1)]),_:1},8,["leftIcon","href","download"]),u(t(ce),{type:"danger"},{trigger:d(({setIsOpen:w})=>[T((s(),U(t(V),{color:"gray",variant:"outline",leftIcon:t(Oe),onClick:()=>w(!0)},{default:d(()=>[_(l(e.$t("Delete")),1)]),_:2},1032,["leftIcon","onClick"])),[[N,"media.destroy"]])]),title:d(()=>{var w;return[o("div",wo,[_(l(e.$t("Delete"))+" ",1),o("p",bo,l(((w=i.value.custom_properties)==null?void 0:w.name)||i.value.file_name),1)])]}),content:d(()=>[_(l(e.$t("Are you sure you want to delete this media? It will be permanently removed from our servers and all links pointing to it will be broken. This action cannot be undone.")),1)]),buttons:d(({setIsOpen:w})=>[u(t(V),{color:"danger",onClick:p[4]||(p[4]=K(()=>{R(i.value.id)},["prevent"]))},{default:d(()=>[_(l(e.$t("Delete")),1)]),_:1}),u(t(V),{color:"gray",variant:"outline",onClick:K(()=>w(),["prevent"])},{default:d(()=>[_(l(e.$t("Cancel")),1)]),_:2},1032,["onClick"])]),_:1})])):M("",!0)])),[[H,{duration:100}]])]}),_:1})):M("",!0)]),default:d(()=>[u(t(xe),{"no-padding":b.value==="list"},{tabs:d(()=>[u(t(de),{href:e.route("media.index"),selected:n(e.route("media.index"))},{default:d(()=>[_(l(e.$t("All")),1)]),_:1},8,["href","selected"]),u(t(de),{href:e.route("media.images"),selected:n(e.route("media.images"))},{default:d(()=>[_(l(e.$t("Images")),1)]),_:1},8,["href","selected"]),u(t(de),{href:e.route("media.files"),selected:n(e.route("media.files"))},{default:d(()=>[_(l(e.$t("Files")),1)]),_:1},8,["href","selected"])]),actions:d(()=>[o("div",Ot,[u(t(Ue),{"active-filters-count":t(g),"reset-filters":t(v)},{default:d(()=>{var h,I,w,D;return[(h=e.filterOptions.model_type)!=null&&h.length?(s(),U(t(ae),{key:0,modelValue:t(A).model_type,"onUpdate:modelValue":p[0]||(p[0]=z=>t(A).model_type=z),name:"model_type",label:e.$t("Model type"),options:e.filterOptions.model_type},null,8,["modelValue","label","options"])):M("",!0),(I=e.filterOptions.collection_name)!=null&&I.length?(s(),U(t(ae),{key:1,modelValue:t(A).collection_name,"onUpdate:modelValue":p[1]||(p[1]=z=>t(A).collection_name=z),name:"collection_name",label:e.$t("Collection"),options:e.filterOptions.collection_name},null,8,["modelValue","label","options"])):M("",!0),(w=e.filterOptions.mime_type)!=null&&w.length?(s(),U(t(ae),{key:2,modelValue:t(A).mime_type,"onUpdate:modelValue":p[2]||(p[2]=z=>t(A).mime_type=z),name:"mime_type",label:e.$t("Mime type"),options:e.filterOptions.mime_type},null,8,["modelValue","label","options"])):M("",!0),(D=e.filterOptions.disk)!=null&&D.length?(s(),U(t(ae),{key:3,modelValue:t(A).disk,"onUpdate:modelValue":p[3]||(p[3]=z=>t(A).disk=z),name:"disk",label:e.$t("Disk"),options:e.filterOptions.disk},null,8,["modelValue","label","options"])):M("",!0)]}),_:1},8,["active-filters-count","reset-filters"]),o("div",Bt,[o("div",Nt,[o("div",{class:O(["absolute inset-0 right-auto w-1/2 p-0.5 transition-all",{"translate-x-0":b.value==="grid","translate-x-full":b.value==="list"}])},p[5]||(p[5]=[o("div",{class:"h-full w-full rounded-md bg-white shadow-sm"},null,-1)]),2),(s(),c(S,null,J(["grid","list"],h=>u(t(Ce),{key:h,size:"xs",icon:h==="grid"?t(Qe):t(Xe),variant:(b.value===h,"ghost"),color:b.value===h?"primary":"gray",class:O([{"!bg-transparent":b.value===h},"z-10"]),onClick:I=>b.value=h},null,8,["icon","variant","color","class","onClick"])),64))])])])]),footer:d(()=>[u(t(Fe),null,{default:d(()=>[u(t(Me),{pagination:k.value,"data-key":"data"},null,8,["pagination"])]),_:1})]),default:d(()=>[o("section",null,[e.data.data.length?(s(),c(S,{key:1},[b.value==="grid"?T((s(),c("ul",{key:0,role:"list",class:O(["3xl:grid-cols-5 grid grid-cols-2 gap-x-4 gap-y-8 sm:grid-cols-3 sm:gap-x-6 lg:grid-cols-4 xl:gap-x-8",[i.value?"xl:grid-cols-3 2xl:grid-cols-4":"xl:grid-cols-5 2xl:grid-cols-5"]])},[(s(!0),c(S,null,J(e.data.data,h=>{var I,w,D;return s(),c("li",{key:h.id,class:"relative"},[o("div",{class:O([((I=i.value)==null?void 0:I.id)===h.id?"ring-primary-500 ring-2 ring-offset-2":" focus-within:ring-primary-500 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100","group block w-full overflow-hidden rounded-md border border-gray-100"])},[u(t(W),{file:h},null,8,["file"]),o("button",{type:"button",class:"absolute inset-0 focus:outline-none",onClick:z=>i.value=h},[o("span",St,l(e.$t("View details for :name",{name:((w=h.custom_properties)==null?void 0:w.name)||h.file_name})),1)],8,Ht)],2),o("p",Lt,l(((D=h.custom_properties)==null?void 0:D.name)||h.file_name),1),o("p",Tt,l(t(E)(h.size)),1)])}),128))],2)),[[H]]):M("",!0),b.value==="list"?(s(),c("div",Zt,[u(t(Ie),{"base-url":C.value,data:e.data,"data-key":"data","with-pagination":!1,"with-bulk-select":!1,class:"inline-block min-w-full align-middle"},{tableHead:d(()=>[u(t(le),null,{default:d(()=>[_(l(e.$t("Preview")),1)]),_:1}),u(t(le),{"sort-by":"title"},{default:d(()=>[_(l(e.$t("Title")),1)]),_:1}),u(t(le),{"sort-by":"size"},{default:d(()=>[_(l(e.$t("Size")),1)]),_:1})]),tableRow:d(({item:h,action:I})=>[u(t(re),{onClick:w=>i.value=h},{default:d(()=>{var w;return[u(t(W),{file:h,class:O(["!w-14 cursor-pointer",[((w=i.value)==null?void 0:w.id)===h.id?"ring-primary-500 ring-2 ring-offset-2":" focus-within:ring-primary-500 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-100","group block w-full overflow-hidden rounded-md border border-gray-100"]])},null,8,["file","class"])]}),_:2},1032,["onClick"]),u(t(re),null,{default:d(()=>{var w;return[_(l(((w=h.custom_properties)==null?void 0:w.name)||h.file_name),1)]}),_:2},1024),u(t(re),null,{default:d(()=>[_(l(t(E)(h.size)),1)]),_:2},1024)]),_:1},8,["base-url","data"])])):M("",!0)],64)):(s(),U(t(Ve),{key:0}))])]),_:1},8,["no-padding"])]),_:1})],64)}}});export{Bo as default};
